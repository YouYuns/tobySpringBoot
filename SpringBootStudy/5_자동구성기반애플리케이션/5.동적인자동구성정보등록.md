### âœ… ë™ì ì¸ ìë™ êµ¬ì„± ì •ë³´ ë“±ë¡

#### ğŸ“Œ @EnableMyAutoConfigurationì€ ë‹¨ì§€ @Importí•˜ë“œì½”ë”©ë˜ì–´ìˆëŠ” ê²ƒ ë¿ì¸ë° ì´ê±¸ ë™ì ìœ¼ë¡œ ë°”ê¿”ë³´ì

#### ğŸ’¡ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜¬ë ¤ë©´ @ImportSelectorë¼ëŠ” ì• ë…¸í…Œì´ì…˜ì„ ì‚¬ìš©í•´ì•¼ëœë‹¤.

1. MyAutoConfigImportSelectorí´ë˜ìŠ¤ë¥¼ ë§Œë“¤ê³  ImportSelector êµ¬í˜„í•˜ëŠ” DeferredImportSelectorë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„í•œë‹¤.
    - ì´ê±¸ @Import(MyAutoConfigImportSelector.class)ë¡œ ë“±ë¡í•œë‹¤.
```java
public class MyAutoConfigImportSelector implements DeferredImportSelector {
    @Override
    public String[] selectImports(AnnotationMetadata importingClassMetadata) {
        return new String[]{
                "com.example.config.autoconfig.DispatcherServletConfig",
                "com.example.config.autoconfig.TomcatWebServerConfig"
        };
    }
}
```

#### ğŸ’¡ ë¬¸ìì—´ë¡œ Configuration í´ë˜ìŠ¤ ì •ë³´ë¥¼ ë¦¬í„´ í•´ì£¼ë©´ ì´ê±¸ ì»¨í…Œì´ë„ˆê°€ ë¡œë”©í•˜ëŠ” ë°©ì‹ì´ë‹¤.

2. ì´ ë¶€ë¶„ì„ ì¢€ë” ìœ ì—°í•˜ê²Œ ì„¤ì •í•˜ê¸° ìœ„í•´ì„œ ì†ŒìŠ¤ì½”ë“œë¥¼ ë“±ë¡í•´ë†¨ë˜ ì •ë³´ë¥¼ ì™¸ë¶€ ì„¤ì • íŒŒì¼ë¡œ ë¹¼ë³´ì

META-INF.spring íŒŒì¼ì„ ë§Œë“¤ê³  í•´ë‹¹ ê²½ë¡œë¥¼ ë„£ì–´ì¤€ë‹¤.
![img_13.png](img_13.png)

3. MyAutoConfigImportSelectorë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤.
```java
public class MyAutoConfigImportSelector implements DeferredImportSelector {

    private final ClassLoader classLoader;

    public MyAutoConfigImportSelector(ClassLoader classLoader) {
        this.classLoader = classLoader;
    }

    @Override
    public String[] selectImports(AnnotationMetadata importingClassMetadata) {

        List<String> autoConfigs = new ArrayList<>();

        //ê·¸ëŸ¼ ì´ ë°©ì‹ì—ì„œ ì–´ë–»ê²Œ íŒŒì¼ ì •ë³´ë¥¼ ì½ì–´ì˜¬ê¹Œ?
        // loadë¼ëŠ” ìŠ¤í”„ë§ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” ë©”ì„œë“œë¥¼ ë´ì•¼ë˜ëŠ”ë°
        //META-INF.springë°‘ì— í•´ë‹¹íŒŒì¼ì„ ë„£ì–´ì¤€ë‹¤
        for(String candidate : ImportCandidates.load(MyAutoConfiguration.class, classLoader)){
            autoConfigs.add(candidate);
        }


        //ë¦¬ìŠ¤íŠ¸ì— ì§‘ì–´ë„£ì€ê±¸ ë‹¤ì‹œ Arrayë¡œ ë°”ê¾¸ëŠ” ì‘ì—…
//        return autoConfigs.toArray(new String[0]);
       //ìë°”8ì´í›„ì— arrayë¡œ ë°”ê¾¸ëŠ” ì‘ì—…
        return autoConfigs.stream().toArray(String[]::new);


//        return StreamSupport.stream(candidates.spliterator(), false).toArray(String[]::new);

    }
}
```
