###  ë…ë¦½ì‹¤í–‰í˜• ì„œë¸”ë¦¿ ì• í”Œë¦¬ì¼€ì´ì…˜




### âœ… ì–´ë–»ê²Œ ì´ê²Œ ë™ì‘í•˜ëŠ”ê°€? ê·¸ ì›ë¦¬ë¥¼ í•˜ë‚˜ì”© ì½”ë“œë¥¼ ì§ì ‘ ë§Œë“¤ì–´ë³´ì!

```java
public class TobySpringBootApplication {
    public static void main(String[] args) {
    }
}
//ë¨¼ì € ëª¨ë“  ì½”ë“œë¥¼ ë‹¤  ì§€ìš°ê³  ì§ì ‘ ë§Œë“¤ì–´ë³´ì
```
### âœ… ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì„¤ì¹˜ í•˜ì§€ ì•Šê³  ì–´ë–»ê²Œ ë™ì‘í•˜ê²Œ ë§Œë“¤ê²ƒì¸ê°€?
![img_1.png](img_1.png)

- ìŠ¤íƒ ë“œ ì–¼ë¡  í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ê³  ê·¸ ìŠ¤íƒ ë“œ ì–¼ë¡  í”„ë¡œê·¸ë¨ì—ì„œ ì•Œì•„ì„œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ë„ì›Œì£¼ëŠ” ì‘ì—…ì„ í•´ì•¼í•œë‹¤.
####
- ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ëŠ” ì„œë¸”ë¦¿ì´ ë§ì´ ìˆì§€ë§Œ ê´€ì‹¬ì‚¬ì—ì„œ ì§€ì›Œì•¼ë˜ë‹ˆ ë¨¼ì € ì„œë¸”ë¦¿ í•˜ë‚˜ë¥¼ ë§Œë“œëŠ” ì‘ì—…ì„ í•´ë³´ì
####
![img_2.png](img_2.png)

- í•˜ì§€ë§Œ ì„œë¸”ë¦¿ì„ ë§Œë“¤ê¸°ì „ì— ë¨¼ì € ë¹ˆ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ì–´ë³´ì
####
![img_3.png](img_3.png)

#### ğŸ’¡ ì„œë¸”ë¦¿ì´ë¼ëŠ” ê²ƒì€ ìë°”ì˜ í‘œì¤€ê¸°ìˆ ì´ê³  ì´ í‘œì¤€ ê¸°ìˆ ì„ êµ¬í˜„í•œ ì»¨í…Œì´ë„ˆ ì œí’ˆë“¤ì´ ë§ì´ ë‚˜ì™€ìˆë‹¤. (ëŒ€í‘œì  í†°ì¼“)

```java
import org.apache.catalina.startup.Tomcat;
import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;
import org.springframework.boot.web.server.WebServer;
import org.springframework.boot.web.servlet.ServletContextInitializer;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class TobySpringBootApplication {

    public static void main(String[] args) {
        ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
        WebServer webServer = serverFactory.getWebServer(servletContext -> {
            servletContext.addServlet("hello", new HttpServlet() {
                @Override
                protected void service(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
                    super.service(req, resp);
                }
            });
        });
        webServer.start();
    }
}
```
1. í†°ìº£ì„ ë¨¼ì € ë„ìš°ê¸°
####
2. TomcatServletWebServerFactory() - í†°ìº£ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ë‚´ì¥ì—ì„œ ì´ê±°ë¥¼ ì‰½ê²Œ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ ë§Œë“¤ì–´ì¤€í´ë˜ìŠ¤
####
3. TomcatServletWebServerFactory() ì•ˆì— getWebServerë¼ëŠ” ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ê°€ ìˆë‹¤.
####
ğŸ’¡ WebServerê°€ ë¦¬í„´ íƒ€ì…ì¸ë° í†°ìº£ì´ ì•„ë‹Œì´ìœ ëŠ” í†°ìº£ë¿ë§Œ ì•„ë‹ˆê³  ë‹¤ë¥¸ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì œí‹° ë“±ë“±ë„ ì‚¬ìš©í• ìˆ˜ ìˆê²Œ ì¶”ìƒí™”ë¥¼ í•´ë†¨ê¸° ë•Œë¬¸ì´ë‹¤.
####
4. start()ë¥¼ í•˜ë©´ tomcat ì›¹ì„œë²„ê°€ 8080 í¬íŠ¸ì— ì‹¤í–‰ì´ ëœë‹¤.
####
5. ServletWebServerFactoryì˜ getWebServerëŠ” ServletContextInitializerë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê°–ëŠ”ë‹¤.
####
ğŸ’¡ ServletContextInitializerì˜ ì—­í•  : ì„œë¸”ë¦¿ ì»¨í…ìŠ¤íŠ¸ë¥¼ í”„ë¡œê·¸ë¨ì— ì˜í•´ì„œ êµ¬ì„±í•˜ëŠ” ì‘ì—…ì— ì‚¬ìš©ë˜ì–´ì§€ëŠ” ì¸í„°í˜ì´ìŠ¤<br>
ğŸ’¡ ê°„ë‹¨íˆ ë§í•´ì„œ ì´ê±°ë¥¼ ì´ìš©í•´ì„œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì—ë‹¤ê°€ ì„œë¸”ë¦¿ì„ ë“±ë¡í•˜ëŠ”ë° í•„ìš”í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê·¸ëŸ° ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ë•Œ ì“´ë‹¤.
####
6. ServletContextInitializerê°€ êµ¬í˜„í–ˆì–´ì•¼ë  onStartUp ë©”ì„œë“œ ë§Œë“¤ê¸°
```java
import org.springframework.boot.web.servlet.ServletContextInitializer;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;

public class TobySpringBootApplication {

    public static void main(String[] args) {
        ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
        WebServer webServer = serverFactory.getWebServer(new ServletContextInitializer() {
            @Override
            public void onStartup(ServletContext servletContext) throws ServletException {
                
            }
        });
        webServer.start();
    }
}
```
####
7. í•¨ìˆ˜í˜• ì¸í„°í˜ì´ìŠ¤(Functional Interface)ì´ê¸° ë–„ë¬¸ì— ëŒë‹¤ì‹ìœ¼ë¡œ ë°”ê¾¸ê¸° ê°€ëŠ¥

 ```java
import org.springframework.boot.web.servlet.ServletContextInitializer;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;

public class TobySpringBootApplication {

    public static void main(String[] args) {
        ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
        WebServer webServer = serverFactory.getWebServer((ServletContextInitializer) 
                servletContext -> {
                   
        });
        webServer.start();
    }
}
```
####
8. ServletContextì•ˆì—ëŠ” addServletì´ë¼ëŠ” ë©”ì„œë“œê°€ ìˆë‹¤ <br>
    - ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ í•´ë³¸ë‹¤.
    - ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°’ì¸ ì„œë¸”ë¦¿ ì´ë¦„ - Helloì»¨íŠ¸ë¡¤ëŸ¬ ë§Œë“ ê²ƒê³¼ ìœ ì‚¬í•˜ê²Œ ë™ì‘í•˜ê²Œ í•˜ëŠ” ì½”ë“œë¥¼ ë„£ì„ê±°ë‹ˆ "Hello"
    - ë‘ë²ˆì§¸ íŒŒë¼ë¯¸í„°ê°’ì¸ ì„œë¸”ë¦¿íƒ€ì…(ì¸í„°í˜ì´ìŠ¤)ì¸ë° ê·¸ê±¸ êµ¬í˜„í•´ ë†“ì€ ì¼ì¢…ì˜ ì–´ëŒ‘í„° í´ë˜ìŠ¤ê°€ ìˆëŠ”ë° HttpServletì´ë¼ëŠ” í´ë˜ìŠ¤ì´ë‹¤.
    - HttpServletì—ì„œ serviceë¼ëŠ” ë©”ì„œë“œë¥¼ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•œë‹¤.
    - serviceë©”ì„œë“œë¥¼ ë³´ë©´ ìš”ì²­ê³¼ ì‘ë‹µì„ ë§Œë“œëŠ” ì˜¤ë¸Œì íŠ¸ê°€ íŒŒë¼ë¯¸í„°ë¡œ í•˜ë‚˜ì”© ì „ë‹¬ì´ ëœë‹¤.
    - addServletë§Œí•´ì„œ ë“±ë¡í•˜ë©´ ëë‚˜ì§€ëŠ” ì•ŠëŠ”ë‹¤, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì»¨í…Œì´ë„ˆë¡œ ë“¤ì–´ì˜¤ëŠ” ì›¹ ìš”ì²­ì„ ì–´ëŠ ì„œë¸”ë¦¿ì— ì—°ê²°í•´ì¤„ê±°ëƒë¥¼ ê²°ì •í•˜ëŠ” ë§¤í•‘ì´ í•„ìš”í•œë° ê·¸ ë§¤í•‘ì„ ì¶”ê°€í•´ì¤˜ì•¼ëœë‹¤.
    - addMappingë¥¼ ì´ìš©í•´ì„œ í•´ë‹¹ urlë¡œ ë“¤ì–´ì˜¤ëŠ”ê²Œ serviceë¡œ ì „ë‹¬ì´ ë˜ê³  serviceë©”ì„œë“œì•ˆì—ì„œ ì‘ë‹µì„ ë§Œë“¤ì–´ë‚¸ë‹¤.
 ```java
import org.springframework.boot.web.servlet.ServletContextInitializer;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServlet;
import java.io.IOException;

public class TobySpringBootApplication {

    public static void main(String[] args) {
        ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
        WebServer webServer = serverFactory.getWebServer((ServletContextInitializer)
                servletContext -> {
                    servletContext.addServlet("hello", new HttpServlet() {
                        @Override
                        public void service(ServletRequest req, ServletResponse res) throws ServletException, IOException {
                            super.service(req, res);
                        }
                    }).addMapping("/hello");
                });
        webServer.start();
    }
}
```
####
####
9. ì›¹ ì‘ë‹µì„ ë§Œë“ ë‹¤.
    - ì›¹ ì‘ë‹µì˜ 3ê°€ì§€ ìš”ì†Œ
        - ìƒíƒœë¼ì¸ì—ì„œ ìƒíƒœì½”ë“œ, í—¤ë”(ì»¨í…ì¸ íƒ€ì…) , ë°”ë””
 ```java
import org.springframework.boot.web.servlet.ServletContextInitializer;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class TobySpringBootApplication {

   public static void main(String[] args) {
      ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
      WebServer webServer = serverFactory.getWebServer((ServletContextInitializer)
              servletContext -> {
                 servletContext.addServlet("hello", new HttpServlet() {
                    @Override
                    public void service(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
                       res.setStatus(200); //ì‘ë‹µì½”ë“œ
                       res.setHeader("Content-Type", "text/plain"); //í—¤ë”
                       res.getWriter().println("Hello Servlet");//ë°”ë””
                    }
                 }).addMapping("/hello");
              });
      webServer.start();
   }
}
```
####
10. Http -v :8080/helloë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´ ì˜ ë‚˜ì˜¨ë‹¤.
