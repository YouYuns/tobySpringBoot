## âœ… @Conditionalê³¼ Condition

### 


1. Jettyì„œë²„ë„ ì‚¬ìš©ê°€ëŠ¥í•˜ê²Œ Starterë„ ì¶”ê°€í•˜ê³  Configurationí´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ì„œ Jettyë¥¼ ì‚¬ìš©í•˜ëŠ” ë¹ˆì´ ë§Œë“¤ì–´ì§€ë„ë¡ ë“±ë¡ì„í•œë‹¤.
```java
import com.example.config.MyAutoConfiguration;
import org.springframework.boot.web.embedded.jetty.JettyServletWebServerFactory;
import org.springframework.boot.web.servlet.server.ServletWebServerFactory;
import org.springframework.context.annotation.Bean;


@MyAutoConfiguration
public class JettyWebServerConfig {
   @Bean("jettyWebServerFactory")
   public ServletWebServerFactory servletWebServerFactory() {
      return new JettyServletWebServerFactory();
   }
}
```

2. ì´ êµ¬ì„±ë“¤ì€ ìë™êµ¬ì„±ë°©ì‹ì— ì˜í•´ì„œ AutoConfigurationì˜ Importë¼ëŠ” íŒŒì¼ì—ë‹¤ê°€ ë‹¤ ê¸°ìˆ í•´ ë„£ì—ˆë‹¤.
   - í•˜ì§€ë§Œ ë¬´ì—‡ì„ ì‚¬ìš©í• ë•Œ ë§ˆë‹¤ ìˆ˜ì •í•  ìˆ˜ëŠ” ì—†ë‹¤.
   - ë¹ˆìœ¼ë¡œ ë“±ë¡í•  Configurationí´ë˜ìŠ¤ì— í›„ë³´ë¡œ ì§€ì •ì„ í•´ë‘ê³  ì–´ë–¤ ì¡°ê±´ì„ ë‹¬ì•„ì„œ ê·¸ ì¤‘ì—ì„œ ì–´ë–¤ êµ¬ì„±ì •ë³´ë¥¼ í™œìš©ì„ í•˜ê² ë‹¤ ê²°ì •ì„ ë‚´ë¦¬ê²Œ ë§Œë“¤ì–´ì•¼í•œë‹¤.
---
### ğŸ’¡ Condition
   - @Conditionalì— ì§€ì •ë˜ì–´ì„œ êµ¬ì²´ì ì¸ ë§¤ì¹­ ì¡°ê±´ì„ ê°€ì§„ í´ë˜ìŠ¤ê°€ êµ¬í˜„í•´ì•¼í•  ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
   - ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ ì œê³µí•˜ëŠ” ApplicationContextRunnerë¥¼ ì‚¬ìš©í•˜ë©´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆì— ë¹ˆì´ ë“±ë¡ëëŠ”ì§€ë¥¼ í…ŒìŠ¤íŠ¸ í•  ë•Œ í¸ë¦¬
     í•˜ë‹¤. @Conditionalì´ ì ìš©ëœ ìë™ êµ¬ì„± í´ë˜ìŠ¤ì˜ ì ìš© ì—¬ë¶€ë¥¼ í…ŒìŠ¤íŠ¸ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
   - Conditionì˜ matches ë©”ì†Œë“œì—ëŠ” @Conditional ì• ë…¸í…Œì´ì…˜ì˜ ì—˜ë¦¬ë¨¼íŠ¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¬ ìˆ˜ ìˆëŠ”
     AnnotatedTypeMetadataë¥¼ ì „ë‹¬ ë°›ëŠ”ë‹¤.
---

Jettyì„¤ì •
```java
import org.springframework.boot.web.embedded.jetty.JettyWebServer;
import org.springframework.context.annotation.ConditionContext;
import org.springframework.core.type.AnnotatedTypeMetadata;

import java.util.concurrent.locks.Condition;

@MyAutoConfiguration
@Conditional(JettyWebServer.JettyCondition.class)
public class JettyWebServerConfig {
   @Bean("jettyWebServerFactory")
   public ServletWebServerFactory servletWebServerFactory() {
      return new JettyServletWebServerFactory();
   }

   static class JettyCondition implements Condition {
      @Override
      public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
         return true;
      }
   }

}
```

Tomcatì„¤ì •

```java
import com.example.config.autoconfig.TomcatWebServerConfig;

@MyAutoConfiguration
@Conditional(TomcatWebServerConfig.TomcatCondition.class)
public class JettyWebServerConfig {
   @Bean("jettyWebServerFactory")
   public ServletWebServerFactory servletWebServerFactory() {
      return new JettyServletWebServerFactory();
   }

   static class TomcatCondition implements Condition {
      @Override
      public boolean matches(ConditionContext context, AnnotatedTypeMetadata metadata) {
         return true;
      }
   }

}
```
---
#### ğŸ“Œ  @Conditionalì€ @Configuration í´ë˜ìŠ¤ì™€ @Bean ë©”ì†Œë“œì— ì ìš© ê°€ëŠ¥í•˜ë‹¤. í´ë˜ìŠ¤ ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ëª»í•˜ëŠ” ê²½ìš° ë©”ì†Œë“œëŠ” ë¬´ì‹œëœë‹¤.

![img.png](img.png)