### âœ… Beanì˜ ìƒëª…ì£¼ê¸° ë©”ì†Œë“œ

1. ìš°ë¦¬ê°€ ë§Œë“  ì˜¤ë¸Œì íŠ¸ ì¤‘ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•˜ëŠ”ê±´ HelloControllerì™€ SimpleHelloService 2ê°œì˜ í´ë˜ìŠ¤ì´ë‹¤.
####
2. ê·¸ê±° ì™¸ì— ì˜¤ë¸Œì íŠ¸ë¥¼ ìƒˆë¡œ ìƒì„±í•˜ëŠ”ê²Œ 2ê°œê°€ ìˆëŠ”ë° ServletWebServerFactoryì™€ DispatcherServletì´ë‹¤.
####
3. ì´ 2ê°œì˜ ì˜¤ë¸Œì íŠ¸ë„ ìŠ¤í”„ë§ì˜ ë¹ˆìœ¼ë¡œ ë“±ë¡ì„ í•´ë³´ì
####
4. ë¹ˆìœ¼ë¡œ ë“±ë¡ì„ í•˜ê²Œë˜ë©´ ë‚˜ì¤‘ì— ìœ ì—°í•œ êµ¬ì„±ì´ ê°€ëŠ¥í•´ì§„ë‹¤.
####
5. ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ëŠ” ë°©ë²• ì¤‘ì—ì„œ íŒ©í† ë¦¬ ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ë§Œë“¤ì–´ë³¸ë‹¤.
   - DispatcherServletì€ ìê¸°ê°€ ë§Œë“  ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì°¾ì•„ì•¼ë˜ê¸° ë•Œë¬¸ì— ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë„˜ê²¨ì¤˜ì•¼ëœë‹¤, ê·¸ë˜ì„œ WebApplicationContextë¥¼ ìƒì„±ìë¥¼ í†µí•´ì„œ ì „ë‹¬ì„ í–ˆë‹¤.
   - ê·¼ë° íŒ©í† ë¦¬ ë©”ì†Œë“œë¡œ ìƒì„±ì ì—†ì´ ìƒì„±ì„ í•˜ë‹ˆê¹Œ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ í•œë²ˆì£¼ì…í•´ì„œ ApplicationContextë¥¼ ë„˜ê²¨ì¤˜ì•¼ëœë‹¤. (dispatcherServlet.setApplicationContext(this))

```java


import org.springframework.boot.web.embedded.tomcat.TomcatServletWebServerFactory;
import org.springframework.boot.web.servlet.server.ServletWebServerFactory;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.web.servlet.DispatcherServlet;

@Configuration
@ComponentScan
public class TobySpringBootApplication {

    @Bean
    public ServletWebServerFactory servletWebServerFactory() {
        return new TomcatServletWebServerFactory();
    }

    @Bean
    public DispatcherServlet dispatcherServlet(){
        return new DispatcherServlet();
    }

    public static void main(String[] args) {
        //ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“œëŠ” ì‘ì—…
        AnnotationConfigApplicationContext applicationContext = new AnnotationConfigApplicationContext() {

            @Override
            protected void onRefresh() {
                super.onRefresh();
                //ì„œë¸”ë¦¿ì„ ë“±ë¡í•˜ëŠ” ì‘ì—…

                ServletWebServerFactory serverFactory = this.getBean(ServletWebServerFactory.class);
                DispatcherServlet dispatcherServlet = this.getBean(DispatcherServlet.class);
                dispatcherServlet.setApplicationContext(this);
                
                WebServer webServer = serverFactory.getWebServer((ServletContextInitializer)
                        servletContext -> {
                            // ì € HelloControllerë¼ëŠ” ê²ƒì€ ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ í•„ìš”ê°€ ì—†ë‹¤ ê³„ì† ì¬ì‚¬ìš©í•´ë„ëœë‹¤.
                            servletContext.addServlet("dispatcherServlet",
                                    dispatcherServlet
                            ).addMapping("/*");
                        });
                webServer.start();
            }
        };
//        applicationContext.registerBean(HelloController.class);
//        applicationContext.registerBean(SimpleHelloService.class);
        applicationContext.register(com.example.tobyspringboot.TobySpringBootApplication.class);
        applicationContext.refresh();

        //ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¥¼ ì½”ë“œë¡œ ì‹¤í–‰
        ServletWebServerFactory serverFactory = new TomcatServletWebServerFactory();
    }
}
```
#### ğŸ’¡ í•˜ì§€ë§Œ DispatcherServletì´ ìƒì„±ìì—†ì´ ì˜¤ë¸Œì íŠ¸ë¥¼ ë§Œë“¤ì–´ì„œ ë¦¬í„´ì„ í•˜ë”ë¼ë„ ë¬¸ì œê°€ ì—†ëŠ”ë° ê·¸ê±´ ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆê°€ ì•Œì•„ì„œ ApplicationContextë¥¼ ì£¼ì…í•´ì£¼ê¸° ë–„ë¬¸ì´ë‹¤.
